---
U: User
G: GPT or Gemini
C: Claude
---

# Session 1.

## U

> hwp 파일을 마크다운으로 변환하는데,
> 
> 내용물에는 표, 그래프, 수식, 특수문자 등 식별이 어려운 다양한 요소들이 포함되어있어.
> 

> llm 학습용으로 사용할 데이터셋 제작용도

## U

>    # [python 초벌변환 경험 공유]
>   
>   이미 기존에 로컬에서 python을 이용한 초벌변환을 시행한 적이 있어.
>   
>   ## 1. 1차 시도 — 단순변환
>   
>   hwp → docx → md 경로 변환에 집중한 코드를 이용함.
>   
>   ### 1.1 발생한 문제점
>   
>   주로 아래와 같고, 그 외 minor issues 다수
>   
>   - 특수문자처리 미흡, 깨진 글자들 다수 존재
>   - 표 구조물을 식별하지 않고 표 안에 포함된 데이터만 텍스트 형식으로 복사됨
>   - 그래프 등 기타 구성요소 누락
>   
>   ## 2. 2차 시도
>   
>   표 등 구성요소를 별도추출하는 코드를 이용함.
>   
>   ### 2.1 주의사항
>   
>   - 내가 변환하고자 하는 파일 컨텐츠는 시험지임.
>       
>       (이것은 다양한 hwp중에서 '시험지'라는 특수한 분류이므로
>       일반적인 hwp 변환 프로세스에서는 optional 영역으로 분기되어야함)
>       
>   
>   ### 2.2 시험지로 분류된 문서의 주요 특징
>   
>   1. 일반적으로 헤더, 푸터 영역에 과목 및 페이지 등 정보를 포함하고있음
>   이 정보는 dataset을 구축할 때 필수적이지만,
>   filename 등 다른 요소에서 추출 할 수도 있고
>   본문영역만 식별하고 구조물 영역에 포함된 정보는 별도로 태깅하는 등
>   분리하여 처리하는것이 후속절차에 있어서 불필요한 노이즈 발생을 감소시킬 수 있음.
>   2. 표박스 안에다가 제시문을 주고, 이어서 본문에 문제와 보기를 나열하는 등
>   실질은 본문구성요소이지만 형식적으로 '표'로 분류될 수 있는 다양한 텍스트상자 포함됨
>   3. 단편집이 되어있음
>   
>   ### 2.3 문제점
>   
>   1. '시험지'라는 문서의 특징으로 인해서,
>   파이썬 코드로 구조물을 식별하는 방식은
>   실질적으로 본문구성요소인 항목까지 모두 구조물로 분류하여 csv로 변환, 
>   지나치게 많은 요소들이 구조물으로 분류됨.
>   2. 회계학 등 숫자를 다루는 과목에서 1,000,000과 같은 1,000이상의 숫자가 매우 빈번하게 등장함.
>   표 안에 들어있는 위와 같은 숫자들을 모두 csv로 저장하게 되어 구분자가 잘못 인식됨.
>   
>   # 아이디어2 추가질문
>   
>   AIS에는 hwp파일이 업로드 되지 않음.
>   
>   'Function Calling'과 'Structured Output’ 이용하게 되면 기존에 로컬에서 파이썬으로 수행했을때와 동일한 문제점이 발생될 것으로 예상됨.
>   
>   구조물 별도 식별 절차 (두번째 시도)에서 문제점은, 단편집 등 구체적 요소를 지시하지 않은 점?
>   
>   이러한 영역은 매우 다양하기 때문에 하나하나 정의된 코드를 작성하기 어려움.
>   
>   ```markdown
>   복잡 요소 발견!: 표, 수식, 그래프를 만나면? 변환을 시도하는 대신, 고유한 이름표(태그)를 붙여줘요. 예를 들면 이런 식이죠.
>   %%TABLE_ID_001%%
>   %%EQUATION_ID_042%%
>   %%GRAPH_ID_007%%
>   ```
>   
>   위와 같은 태깅을 삽입하기 위해서 더 정교하게 탐지해야 하는데 그 방법을 설계해야함.
>   
>   # 그 외 기타
>   
>   hot folder는, 구현복잡도에 비해 효용이 낮아 불필요함.
>   
>   시험은 1년에 단 한번 시행됨. 시험지는 빈번하게 추가되는 항목이 아님.

## U

> hwp를 입력하면 Gemini가 읽고 바로 반환해주는 프롬프트를 작성해주는건 어떨까? 
> 샘플 파일을 입력할게. 
>
> # 1차: 총 5과목 
> 1. 경영학: 일반경영학 + 재무관리 
> 2. 경제학 
> 3. 상법/기업법: 2024년 까지는 과목명이 상법이었고 2025년부터 기업법으로 바뀜 
> 4. 세법 
> 5. 회계학: 중급회계+고급회계+정부회계+원가관리회계 
>
> 지금과 같이 1교시 (경영+경제) 2교시 (상법/기업법+세법) 3교시 (회계학) 형태로 된 시험지도 있고, 
> 경영, 경제, 상법/기업법, 세법, 회계학 이렇게 다섯과목이 과목별로 나눠진 시험지도 있어. 
> 나는 (경영+경제)라고 되어있더라도 경영, 경제 따로 나눈 결과물을 선호해 
>
> # 2차: 총 5과목 
>
> 1. 세법 
> 2. 재무관리 
> 3. 회계감사 
> 4. 원가회계 
> 5. 재무회계 
>
> --- 
>
> 각 시험지별로 고려할 요소가 다를 수 있어.


## U

> 처음 프롬프트와 지금 프롬프트 비교했을때 후기 말할게.
>
>1.
>tags: [법인세, 세무조정, 주식매수선택권, 개발비, 임원상여금, 전기오류수정손실]
>difficulty: 상
>
>이런건 본문에 포함하지 말고 별도 스프레드시트에 기록했으면 좋겠어.
>구글드라이브에 스프레드시트 하나를 지정해서 기록하는 방법 가능해?
>
>2.
>몇가지 서식 문제, 기존버전이 더 나은경우도 있었고 클로드 버전이 더 나은 경우도 있었어.
>
>사례 몇가지
>1)
>[클로드] ❌
>
>| 익금산입 및 손금불산입 | 손금산입 및 익금불산입 |
>| --- | --- |
>| **과목 / 금액 / 소득처분** | **과목 / 금액 / 소득처분** |
>|  |  |
>
>[잼민이] ✅
>| 익금산입 및 손금불산입 |  |  | 손금산입 및 익금불산입 |  |  |
>| --- | --- | --- | --- | --- | --- |
>| **과목** | **금액** | **소득처분** | **과목** | **금액** | **소득처분** |
>|  |  |  |  |  |  |
>
>
>2)
>
>[클] ✅
>1. 건물B(등기)의 취득 및 양도 내역은 다음과 같다.
>
>| 구분 | 내역 |
>| --- | --- |
>| 취득일 | 2007.7.1. |
>| 양도일 | 2024.10.5. |
>
>| 양도시 |  |
>| --- | --- |
>| 실지양도가액 | 250,000,000원 |
>| 기준시가 | 150,000,000원 |
>
>| 취득시 |  |
>| --- | --- |
>| 실지거래가액 | 100,000,000원 |
>| 감정평가가액 | 120,000,000원 |
>| 매매사례가액 | 160,000,000원 |
>| 기준시가 | 110,000,000원 |
>
>[잼] ❌
>
>1. 건물B(등기)의 취득 및 양도 내역은 다음과 같다.
>
>| 구 분 | 내 용 |
>| --- | --- |
>| 취 득 일 | 2007. 7. 1. |
>| 양 도 일 | 2024. 10. 5. |
>| **양도시** |  |
>| 실지양도가액 | 250,000,000원 |
>| 기준시가 | 150,000,000원 |
>| **취득시** |  |
>| 실지거래가액 | 100,000,000원 |
>| 감정평가가액 | 120,000,000원 |
>| 매매사례가액 | 160,000,000원 |
>| 기준시가 | 110,000,000원 |
>
>
>3)
>
>[클] ❌
>
><요구사항 3>
>갑의 종합소득에 합산되는 사업소득금액을 답안양식에 따라 제시하시오.
>구 분
>종합소득에 합산되는 사업소득금액
>
>[잼] ✅
>
>**<요구사항 3>**
>갑의 종합소득에 합산되는 사업소득금액을 답안양식에 따라 제시하시오.
>
>| 구 분 | 금 액 |
>| --- | --- |
>| 종합소득에 합산되는 사업소득금액 |  |
>
>
>4) 이건 어떤게 더 나은지 판단이 어려워서 장단점 비교 원함.
>
>[클]
>
>**㈜대한의 회계처리**
>
>```
>(차) 투자주식 60,000,000 (대) 매출채권 60,000,000
>
>```
>
>**㈜A의 회계처리**
>
>```
>(차) 매입채무 60,000,000 (대) 자본금 15,000,000
>                      주식발행초과금 45,000,000
>
>```
>
>[잼]
>
>**㈜대한의 회계처리**
>
>|  |  |  |  |
>| --- | --- | --- | --- |
>| 차) 투자주식 | 60,000,000 | 대) 매출채권 | 60,000,000 |
>
>**㈜A의 회계처리**
>
>|  |  |  |  |
>| --- | --- | --- | --- |
>| 차) 매입채무 | 60,000,000 | 대) 자본금 | 15,000,000 |
>|  |  | 주식발행초과금 | 45,000,000 |

## U

> 좋아, 그런데 지금 분석은 '세법' 한 과목에 대한 특수한 상황이었어.
>나는 다른 과목 모두에 대해서도 일반적으로 반영되기를 원한다는점 고려해줘.
>그리고 피드백 한가지 추가할게.
>
>[클]
>
>| 주 주 | 주식수 | 지분율 |
>| --- | --- | --- |
>| ㈜A | 4,000주 | 40% |
>| ㈜서울 | 3,000주 | 30% |
>| ㈜B | 2,000주 | 20% |
>| ㈜C | 1,000주 | 10% |
>| 합 계 | 10,000주 | 100% |
>
>[잼] ✅
>
>| 주 주 | 주식수 | 지분율 |
>| --- | --- | --- |
>| ㈜A | 4,000주 | 40% |
>| ㈜서울 | 3,000주 | 30% |
>| ㈜B | 2,000주 | 20% |
>| ㈜C | 1,000주 | 10% |
>| **합 계** | **10,000주** | **100%** |
>
>인덱스나 합계 등 의미 있는 행,열에는 구분표시 원해.
>지금처럼 볼드처리도 좋고, 다른 가능한 방법을 고려해도 좋아.
>
>---
>
>첫번째 절차로 마크다운으로 변환한 뒤 최종적으로는 JSON셋을 구축하는것이 목표야.
>그렇지만 마크다운처리를 먼저 하는 이유는 사람이 검수하기 편하기 때문.
>그리고 적절한 헤딩, 구조물으로 표시되어서 코드를 이용해서 기계가 읽기 좋은 JSON이나 yaml 형태로 변환하기 용이하다는 장점도 있어.
>
>지금 문제번호, 물음번호, 요구사항 같은 영역에 헤딩을 사용하고 있는데
>내가 원하는 후속처리를 하기 위해 지금 수준의 처리만으로 충분한지 의견 알려줘.


## U 

> 2.
>"<자료>"는 다양한 계층에 등장해. 문제에 포함되는 자료가 있어서 모든 하위 물음에 적용해야 하는것도 있고, 어떤건 물음마다 적용되는 경우도 있어. 일종의 README 같은거랄까?
>자료는 특정 계층에 한정짓기 어려워.


## U

> 우리가 만드는건 파이썬이 아니라 Gemini가 수행하는 작업이야! Gems를 이용하고 있어.
>
>완벽한 자동화를 구축하는건 많은 리소스가 필요하고,
>나는 반복해서 데이터를 구축하는 시도를 하는게 아니라
>약 300개의 hwp파일을 1회 변환하고 나면 이 작업은 더이상 필요하지 않아.
>300개는 수동으로 처리하기에는 많지만, 프로젝트를 구축하기에는 작아.
>hwp파일을 드래그 앤 드롭 하고, 결과물을 다운로드 버튼을 클릭하는것 정도는 직접 수행할 수 있어.
>사람의 개입은 최대한 줄이는것이 좋지만 0%가 될 필요는 없고,
>인적오류의 여지를 감소시키면서, 검수하기 원활한 형태여야하고,
>LLM을 이용하는 것으로 인한 낭비요소가 발생해서는 안돼. 사용하지 않았을 때 보다 개선되어야 한다는것.
>
>자료와 물음의 계층구조 이외에
>원래 시험지에 존재하지 않았던 내용은 불필요해.
>다시 강조하지만, 원본 시험지의 본문영역을 가감없이 동일하게 복구하는것이 목표야.


## U

> 정리하자면 내가 원하는 결과물은
>1. hwp -> md (원본 그대로 복원, 적절한 헤딩과 구조물)
>2. 클로드 버전에서 추가되었던 태그, 난이도 등 문제를 분석한 내용: 스프레드시트, JSON, 혹은 적절한 형식 (논의중)


## U

> 아까 클로드 버전은 문제 사이사이에 메타데이터가 들어있었어. 해당 작업을 그냥 별도의 파일로 분할해 내기만 하는건데 Gems를 두개 설개할 필요는 없을것 같아.


## U

> 자
>Gemini는 hwp를 순서대로 읽으면서 변환할거야.
>
>기존 클로드 방법은
>
>문제
>메타데이터
>원본내용 복원
>
>문제
>메타데이터
>...
>
>이렇게 진행되었어. 하나의 마크다운이지
>
>이걸 병렬분기처리하라는거야.
>
>문서를 순서대로 읽으면서 두개의 파일을 작업하는건데
>
>파일1: 마크다운, 파일2: JSON (또는 적절한 형태)
>
>문제1
>원본데이터 복원 // 마크다운처리
>
>문제1 메타데이터 // JSON 처리
>
>문제2
>원본데이터 // 마크다운처리
>메타데이터 // JSON 처리
>
>이런식의 병렬처리가 불가능한지?


## U

요구사항에도 헤딩 적용 필요해

"자료"는 헤딩 계층을 유연하게 적용하는거지



==예시==

> # [문제1]
>## <자료>
>## (물음1)
>### <요구사항1>
>
># [문제1]
>## (물음1)
>### <자료>
>### <요구사항1>
>
># [문제]
>## <자료>
>## (물음)
>### <자료>
>### <요구사항>
>#### <자료>

