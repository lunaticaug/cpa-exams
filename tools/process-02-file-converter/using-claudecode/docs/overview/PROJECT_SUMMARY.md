# PDF to Markdown 변환 프로젝트 요약

## 프로젝트 목표
금융감독원 공인회계사 시험 기출문제 PDF를 구조화된 Markdown으로 변환

## 개발 과정

### 1단계: 초기 탐색 (process-01~09)
- **문제 발견**: PDF가 2단 편집으로 되어 있어 텍스트 추출 시 순서가 뒤섞임
- **시도한 방법**: pdfplumber, PyMuPDF 등 다양한 라이브러리
- **결과**: 기본적인 텍스트는 추출되나 구조가 엉망

### 2단계: 구조 분석 (process-11~13)
- **접근법**: 문서의 계층 구조를 먼저 파악하고 템플릿 생성
- **발견**: 문제-물음-자료 등의 일정한 패턴 존재
- **한계**: 여전히 2단 레이아웃 문제 해결 못함

### 3단계: 실험적 접근 (process-15~19)
- **다양한 시도**: 수동 구조 채우기, 단순화된 추출 등
- **결론**: 텍스트 기반으로는 한계가 명확

### 4단계: 버전화 및 개선 (v1.10~v1.21)
- **batch_processor_v1.10.py**: 여러 파일 일괄 처리
- **pdf_converter_v1.14.py**: X/Y 좌표 분석으로 2단 레이아웃 해결
- **structure_analyzer_v1.21.py**: 고급 구조 분석

### 5단계: 정확도 향상 (process-22~24, v1.25)
- **정확한 구조 추출**: 2024년 원가회계 파일로 정밀 분석
- **텍스트박스 식별**: 문제/자료 영역 구분

### 6단계: 최종 솔루션 (v1.30~v1.31)
- **efficient_pdf_processor_v1.30.py**: 효율적인 처리 (캐싱 등)
- **vision_based_template_v1.31.py**: Vision API로 정확한 구조 파악

## 핵심 인사이트

1. **2단 편집 PDF의 특성**
   - 좌우 컬럼이 독립적으로 저장됨
   - X 좌표로 컬럼 구분, Y 좌표로 읽기 순서 결정

2. **구조의 중요성**
   - 단순 텍스트 추출보다 구조 파악이 더 중요
   - 문제-물음-자료의 계층 관계 유지 필수

3. **하이브리드 접근법**
   - 텍스트 추출 + Vision API 조합이 가장 효과적
   - 복잡한 페이지만 Vision 처리로 비용 절감

## 최종 워크플로우

```
1. PDF 스캔 → 페이지별 복잡도 분석
2. 단순 페이지 → 텍스트 기반 추출
3. 복잡한 페이지 → Vision API 처리
4. 구조 템플릿에 맞춰 조합
5. 최종 Markdown 생성
```

## 다음 과제
- HWP 파일 (2003-2015) 변환
- 다른 과목으로 확장
- 표 데이터 정확한 추출