# Vision API 표 추출 개선 방안

## 문제점 분석

### 1. 병합된 셀 문제
- 원본 PDF의 표는 시각적으로 병합된 셀 사용
- 마크다운은 병합 셀을 지원하지 않음
- 변환 시 데이터 위치가 모호해짐

### 2. 복잡한 헤더 구조
```
사용부문
├── 보조부문 (2열)
│   ├── 수선
│   └── 식당
└── 제조부문 (3열)
    ├── X
    ├── Y
    └── Z
```

## 개선된 표 표현 방식

### 방식 1: 병합 해제 + 명시적 표현
```markdown
[연간 예산 용역의 양]

| 제공부문＼사용부문 | 수선 | 식당 | X | Y | Z |
|-------------------|------|------|-----|-----|-----|
| 수선(단위:시간) | - | - | 160 | 480 | 800 |
| 식당(단위:명) | 400 | 160 | 162 | 108 | 216 |

※ "-"는 서비스를 제공하지 않음을 의미
```

### 방식 2: 구조화된 데이터 표현
```json
{
  "연간_예산_용역의_양": {
    "수선부문": {
      "단위": "시간",
      "수선": null,
      "식당": null,
      "X": 160,
      "Y": 480,
      "Z": 800
    },
    "식당부문": {
      "단위": "명",
      "수선": 400,
      "식당": 160,
      "X": 162,
      "Y": 108,
      "Z": 216
    }
  }
}
```

### 방식 3: 리스트 형식
```markdown
**연간 예산 용역의 양**

수선부문 제공 (단위: 시간):
- X부문: 160
- Y부문: 480
- Z부문: 800
- (수선/식당부문에는 제공하지 않음)

식당부문 제공 (단위: 명):
- 수선부문: 400
- 식당부문: 160
- X부문: 162
- Y부문: 108
- Z부문: 216
```

## 권장 사항

1. **프롬프트 개선**
   - "병합된 셀은 개별 셀로 분리하여 표현"
   - "빈 셀은 '-' 또는 '없음'으로 명시"
   - "복잡한 헤더는 단순화하여 표현"

2. **후처리 검증**
   - 행/열 개수 확인
   - 데이터 총합 검증
   - 원본과 대조

3. **대안적 표현**
   - 매우 복잡한 표는 구조화된 텍스트로
   - JSON 형식으로 정확한 구조 보존
   - 필요시 여러 개의 단순한 표로 분할